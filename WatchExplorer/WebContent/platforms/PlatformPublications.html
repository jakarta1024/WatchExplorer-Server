<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<script type="text/javascript">
$(document).ready(function(){
	var state = WS.platformManager.getState();
	$('#date-intro span').html(WS.format(new Date(), 'yyyy年MM月dd日'));
	if (state === WS.PlatformAdmin.STATES.NOTICES) {
		$('#announces').hide();
		$('#notices table').dataTable({
	        "bProcessing": false,
	        //"sAjaxSource": "./store/admin/",
	        "aoColumnDefs": [
	            {
	                "mRender": function (data, type, row) {
	                    return '<input type="checkbox" value="false" /> ';
	                },
	                "bSortable": false,
	                "bSearchable": false,
	                "aTargets": [0]
	            },{
	                "mRender": function (data, type, row) {
	                    return '<a href="./WatchPreview.jsp?wid=' + row[0] + '" rel="modal">' + data + '</a>';
	                },
	                "aTargets": [1]
	            }, {
	                "mRender": function (data, type, row) {
	                    return '<a href="store/admin/home?ctrl=updatewatch&wid=' + row[0] + '" class="ico edit">编辑</a>';
	                },
	                "bSortable": false,
	                "bSearchable": false,
	                "aTargets": [4]
	            }
	                         ],
	            "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
	            	$('a[rel*=modal]', nRow).facebox();
	            }
	    });
	} else {
		$('#notices').hide();
        $('#announces table').dataTable({
            "bProcessing": false,
            //"sAjaxSource": "./store/admin/",
            "aoColumnDefs": [
                {
                    "mRender": function (data, type, row) {
                        return '<input type="checkbox" value="false" /> ';
                    },
                    "bSortable": false,
                    "bSearchable": false,
                    "aTargets": [0]
                },{
                    "mRender": function (data, type, row) {
                        return '<a href="./WatchPreview.jsp?wid=' + row[0] + '" rel="modal">' + data + '</a>';
                    },
                    "aTargets": [1]
                }, {
                    "mRender": function (data, type, row) {
                        return '<a href="store/admin/home?ctrl=updatewatch&wid=' + row[0] + '" class="ico edit">编辑</a>';
                    },
                    "bSortable": false,
                    "bSearchable": false,
                    "aTargets": [4]
                }
                             ],
                "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
                	$('a[rel*=modal]', nRow).facebox();
                }
        });
	}
});
</script>
</head>
<body>
<h2>请下旨吧，无敌的管理员</h2>
    <p class="page-intro" id="date-intro">今天是<span></span></p>
    <div class="clear"></div><br />
    <div id="notices">
	    <table cellpadding="0" cellspacing="0" border="0" class="display" id="publication_list">
	        <thead>
	            <tr>
	                <th width="5%"><input type="checkbox" value="false" /></th>
	                <th width="30%">公告标题</th>
	                <th width="30%">发布时间</th>
	                <th width="20%">发布者</th>
	                <th width="15%">操作</th>
	            </tr>
	        </thead>
	        <tbody>
	            <tr>
	                <td colspan="5" class="dataTables_empty">正在从服务器获取数据...</td>
	            </tr>
	        </tbody>
	        <tfoot>
	            <tr>
	                <th><input type="checkbox" value="false" style="margin: 0px"/></th>
	                <th>公告标题</th>
	                <th>发布时间</th>
	                <th>发布者</th>
	                <th>操作</th>
	            </tr>
	        </tfoot>
	    </table>
	    <a href="./platforms/AddNotice.jsp" class="button" style="float: right; margin: 4px" id="add_notice" rel="modal"><img src="resources/img/add.png"
                        class="icon" alt=""/>添加</a>
	</div>
	<div id="announces">
        <table cellpadding="0" cellspacing="0" border="0" class="display" id="publication_list">
            <thead>
                <tr>
                    <th width="5%"><input type="checkbox" value="false" /></th>
                    <th width="30%">通告标题</th>
                    <th width="30%">发布时间</th>
                    <th width="20%">发布者</th>
                    <th width="15%">操作</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td colspan="5" class="dataTables_empty">正在从服务器获取数据...</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <th><input type="checkbox" value="false" style="margin: 0px"/></th>
                    <th>通告标题</th>
                    <th>发布时间</th>
                    <th>发布者</th>
                    <th>操作</th>
                </tr>
            </tfoot>
        </table>
        <a href="./platforms/AddAnnounce.jsp" class="button" style="float: right; margin: 4px" id="add_announce" rel="modal"><img src="resources/img/add.png"
                        class="icon" alt=""/>添加</a>
    </div>
    <div class="clear">&nbsp;</div>
</body>
</html>