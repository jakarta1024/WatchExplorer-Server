SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

DROP SCHEMA IF EXISTS `DB_WATCHSHOW` ;
CREATE SCHEMA IF NOT EXISTS `DB_WATCHSHOW` DEFAULT CHARACTER SET utf8 ;
USE `DB_WATCHSHOW` ;

-- -----------------------------------------------------
-- Table `DB_WATCHSHOW`.`T_USERS`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB_WATCHSHOW`.`T_USERS` (
  `USER_ID` BIGINT(20) NOT NULL AUTO_INCREMENT ,
  `USER_NAME` VARCHAR(64) NOT NULL COMMENT '用户名' ,
  `VERIFY_EMAIL` VARCHAR(128) NOT NULL COMMENT '验证邮箱，可用于找到密码，登陆等' ,
  `PASSWORD` VARCHAR(16) NULL COMMENT '应使用PASSWORD_MD5代替' ,
  `PASSWORD_MD5` VARCHAR(32) NULL COMMENT '密码的MD5摘要' ,
  `SEX` CHAR(1) NULL COMMENT '性别值： M/F/N (男，女，未知)' ,
  `BIRTHDAY` DATE NULL ,
  `IS_MARRIED` BIT NULL DEFAULT 0 COMMENT '婚否' ,
  `AVATAR_URL` VARCHAR(512) NULL COMMENT '头像，存为二进制' ,
  `CREDITS` INT NULL COMMENT '信用等级 1--10， 五颗星制' ,
  `PHONE` VARCHAR(20) NULL COMMENT '电话号码' ,
  `REGISTER_TIME` TIMESTAMP NULL COMMENT '注册时间' ,
  `VERSION` INT(8) NULL ,
  `WEIBO` VARCHAR(128) NULL COMMENT '微博账号' ,
  `RENREN` VARCHAR(128) NULL COMMENT '人人账号' ,
  `QQ` VARCHAR(128) NULL COMMENT 'QQ账号' ,
  `GPLUS` VARCHAR(128) NULL COMMENT 'google plus账号' ,
  `FACEBOOK` VARCHAR(128) NULL COMMENT 'facebook账号' ,
  `TWITTER` VARCHAR(128) NULL COMMENT 'twitter账号' ,
  PRIMARY KEY (`USER_ID`) ,
  UNIQUE INDEX `USER_ID_UNIQUE` (`USER_ID` ASC) ,
  UNIQUE INDEX `USER_NAME_UNIQUE` (`USER_NAME` ASC) ,
  UNIQUE INDEX `VERIFY_EMAIL_UNIQUE` (`VERIFY_EMAIL` ASC) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_WATCHSHOW`.`T_WATCH_BRANDS`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB_WATCHSHOW`.`T_WATCH_BRANDS` (
  `BRAND_ID` BIGINT(20) NOT NULL ,
  `NAME_ZH` VARCHAR(64) NULL COMMENT '品牌中文名' ,
  `NAME_EN` VARCHAR(64) NULL COMMENT '品牌英文名' ,
  `INTRODUCTION` LONGTEXT NULL COMMENT '品牌介绍' ,
  `INTRO_SRC_URL` VARCHAR(512) NULL COMMENT '品牌介绍的配图' ,
  `BKGROUND_INTRO` LONGTEXT NULL COMMENT '背景介绍' ,
  `VERSION` INT(8) NULL ,
  `EXTERNAL_URL` VARCHAR(512) NULL COMMENT '外部url连接' ,
  PRIMARY KEY (`BRAND_ID`) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_WATCHSHOW`.`T_WATCH_STORES`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB_WATCHSHOW`.`T_WATCH_STORES` (
  `WATCHSTORE_ID` BIGINT(20) NOT NULL AUTO_INCREMENT COMMENT '零售店ID，此ID可以用于' ,
  `NAME` VARCHAR(45) NOT NULL COMMENT '名表店名' ,
  `RATE` FLOAT NULL COMMENT '评分' ,
  `CREDITS` FLOAT NULL COMMENT '信用等级（1-10）对应与5个星，一个单位值对应半颗星' ,
  `ADDRESS` VARCHAR(48) NULL COMMENT '位置: 省市区街道' ,
  `LONGITUDE` VARCHAR(48) NULL COMMENT '经度信息：格式（122度46分22秒 E）,E/W表示东西经' ,
  `LATITUDE` VARCHAR(48) NULL COMMENT '维度信息：格式（23度26分 22秒 N）N/S表示南北纬。' ,
  `PHONE` VARCHAR(48) NULL COMMENT '联系电话' ,
  `WEBSITE` VARCHAR(48) NULL COMMENT '网站主页地址' ,
  `FAX` VARCHAR(48) NULL COMMENT '传真' ,
  `DESCRIPTION` LONGTEXT NULL COMMENT '表店的文字描述可以是HTML内容，资源文件需对应于DESC_IMAGES_URL,' ,
  `DESC_RESOURCE_URL` VARCHAR(256) NULL COMMENT '店面介绍资源文件(图片，影片等)地址, 应根据id保存，所以此属性会产生冗余' ,
  `REGISTER_TIME` TIMESTAMP NOT NULL COMMENT '表店注册时间, 店家注册时记录时间' ,
  `PROVINCE` VARCHAR(48) NULL COMMENT '省份/直辖市' ,
  `CITY` VARCHAR(48) NULL COMMENT '市' ,
  `DISTRICT` VARCHAR(48) NULL COMMENT '区' ,
  `POSTCODE` INT(6) NULL ,
  `VERSION` INT(8) NULL ,
  `FOUND_TIME` DATE NULL COMMENT '开店时间' ,
  `WEIBO` VARCHAR(128) NULL ,
  `AUTHORISED` BIT NOT NULL DEFAULT 0 COMMENT '是否通过认证并授权:(布尔型)' ,
  `BRAND_ID` BIGINT(20) NOT NULL COMMENT '目前断言：一个store只售一种品牌，如果一店售多个品牌，则需重新申请一个store.' ,
  `FACEBOOK` VARCHAR(128) NULL COMMENT 'facebook账号' ,
  `QQ` VARCHAR(128) NULL COMMENT 'QQ账号' ,
  `RENREN` VARCHAR(128) NULL COMMENT '人人账号' ,
  `TWITTER` VARCHAR(128) NULL COMMENT '推特账号' ,
  `GPLUS` VARCHAR(128) NULL COMMENT 'google plus账号' ,
  PRIMARY KEY (`WATCHSTORE_ID`) ,
  UNIQUE INDEX `RETAILER_STORE_ID_UNIQUE` (`WATCHSTORE_ID` ASC) ,
  INDEX `fk_T_WATCH_STORES_T_WATCH_BRANDS1_idx` (`BRAND_ID` ASC) ,
  CONSTRAINT `fk_T_WATCH_STORES_T_WATCH_BRANDS1`
    FOREIGN KEY (`BRAND_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_WATCH_BRANDS` (`BRAND_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_WATCHSHOW`.`T_STORE_ADMINS`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB_WATCHSHOW`.`T_STORE_ADMINS` (
  `ADMIN_ID` BIGINT(20) NOT NULL AUTO_INCREMENT ,
  `LOGIN_NAME` VARCHAR(64) NOT NULL COMMENT '登录名' ,
  `VERIFY_EMAIL` VARCHAR(128) NOT NULL COMMENT '用于验证的邮箱地址，用户找回密码，登陆等' ,
  `PASSWORD` VARCHAR(16) NOT NULL COMMENT '登陆密码，应使用PASSWORD_MD5' ,
  `PASSWORD_MD5` VARCHAR(32) NULL COMMENT '密码的MD5 长度=32, see http://zh.wikipedia.org/wiki/MD5' ,
  `ROLE` VARCHAR(45) NULL COMMENT '管理员角色：分成多级管理员，不同级别的管理员有不同的操作权限。具体需要根据业务逻辑而定义。（founder/administrator）目前似乎没什么区别，除了founder能够申请关闭表店账号？' ,
  `STORE_ID` BIGINT(20) NOT NULL COMMENT '所在表店to-one关系' ,
  `VERSION` INT(8) NULL ,
  `AUTHORISED` BIT NOT NULL DEFAULT 0 COMMENT '是否通过审核授权' ,
  PRIMARY KEY (`ADMIN_ID`) ,
  UNIQUE INDEX `ADMIN_ID_UNIQUE` (`ADMIN_ID` ASC) ,
  INDEX `fk_T_STORE_ADMIN_T_RETAILER_STORE1_idx` (`STORE_ID` ASC) ,
  UNIQUE INDEX `LOGIN_NAME_UNIQUE` (`LOGIN_NAME` ASC) ,
  UNIQUE INDEX `VERIFY_EMAIL_UNIQUE` (`VERIFY_EMAIL` ASC) ,
  CONSTRAINT `fk_T_STORE_ADMIN_T_RETAILER_STORE1`
    FOREIGN KEY (`STORE_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_WATCH_STORES` (`WATCHSTORE_ID` )
    ON DELETE CASCADE
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_WATCHSHOW`.`T_PUBLICATIONS`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB_WATCHSHOW`.`T_PUBLICATIONS` (
  `PUBLICATION_ID` BIGINT(20) NOT NULL AUTO_INCREMENT ,
  `PUBLISHER_ID` BIGINT(20) NOT NULL COMMENT '此条News的发布者(管理员)，由此可以retrieve到所在的表店。或由所促销的表找到所在表店。此外键主要用于记录log。' ,
  `TITLE` VARCHAR(128) NOT NULL COMMENT '文章(新闻)标题' ,
  `CONTENT` LONGTEXT NOT NULL COMMENT '发布文章(新闻)的内容' ,
  `EXTERNAL_URL` VARCHAR(256) NULL COMMENT '外部链接，不知道连到哪了？' ,
  `SUBTITLE` VARCHAR(256) NULL COMMENT '文章(新闻)副标题,可以为空' ,
  `KIND` VARCHAR(45) NOT NULL COMMENT '发布信息类型: 新闻: News, 知识性文章: Article, 活动信息: Aactivity' ,
  `VERSION` INT(8) NULL ,
  `RESOURCES_URL` VARCHAR(512) NULL ,
  PRIMARY KEY (`PUBLICATION_ID`) ,
  INDEX `fk_T_NEWS_T_STORE_ADMINS1_idx` (`PUBLISHER_ID` ASC) ,
  CONSTRAINT `fk_T_NEWS_T_STORE_ADMINS1`
    FOREIGN KEY (`PUBLISHER_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_STORE_ADMINS` (`ADMIN_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_WATCHSHOW`.`T_WATCHES`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB_WATCHSHOW`.`T_WATCHES` (
  `WATCH_ID` BIGINT(20) NOT NULL AUTO_INCREMENT ,
  `STORE_ID` BIGINT(20) NOT NULL COMMENT '此表所在的表店ID，与ID构成此表的联合主键' ,
  `PRODUCT_SN` VARCHAR(45) NULL COMMENT '商品的唯一吗，有这个东西吗？' ,
  `NAME` VARCHAR(45) NOT NULL COMMENT '表名' ,
  `DISCOUNT` FLOAT NULL DEFAULT 1.0 COMMENT '折扣信息，取值区间为0~1.0' ,
  `DESCRIPTION` LONGTEXT NULL COMMENT '名表信息文字描述' ,
  `SIMPLE_DESC` VARCHAR(512) NOT NULL COMMENT '名表的简单描述' ,
  `DESC_RESOURCE_URL` VARCHAR(512) NULL COMMENT '描述信息中的资源根目录，此属性中存储服务器相对路径. 这个目录的父路径应该由id决定' ,
  `BARCODE` VARCHAR(45) NULL COMMENT '条形码' ,
  `TWODIMCODE` VARCHAR(45) NULL COMMENT '二维码信息，应该填入二维码解码内容，提供图片时由此信息生成' ,
  `GENERATION` INT(2) NULL DEFAULT 1 COMMENT '代' ,
  `RATE_SUM` INT(2) NULL ,
  `RATE_IDEA` INT(2) NULL DEFAULT 0 COMMENT '理念评分' ,
  `RATE_MOVEMENT` INT(2) NULL DEFAULT 0 COMMENT '机芯评分' ,
  `RATE_LOOK` INT(2) NULL DEFAULT 0 COMMENT '外观评分' ,
  `RATE_PROSPECT` INT(2) NULL DEFAULT 0 COMMENT '前景评分' ,
  `RATE_PRICE` INT(2) NULL DEFAULT 0 COMMENT '价格评分' ,
  `MOVEMENT` VARCHAR(45) NULL COMMENT '机芯' ,
  `MATERIAL` VARCHAR(45) NULL COMMENT '材质' ,
  `SIZE` VARCHAR(45) NULL COMMENT '尺寸(直径)' ,
  `STYLE` VARCHAR(45) NULL COMMENT '风格' ,
  `ARCHITECTURE` VARCHAR(45) NULL COMMENT '比如：机械' ,
  `FUNCTION` VARCHAR(45) NULL COMMENT '功能：' ,
  `WATCHBAND` VARCHAR(45) NULL COMMENT '表带' ,
  `DATE_MODIFY` DATETIME NULL COMMENT '添加及修改日期' ,
  `PUBLICATION_ID` BIGINT(20) NULL COMMENT 'Inverse描述：publication涉及到的表' ,
  `BACKGROUND_INTRO` LONGTEXT NULL COMMENT '背景介绍' ,
  `BRAND_ID` BIGINT(20) NOT NULL COMMENT '当前这个关系有些问题，' ,
  `MARKET_TIME` DATE NULL COMMENT '上市时间' ,
  `PRICE` FLOAT NULL COMMENT '价格的单位为元（RMB），暂不支持美元，如需美元价格，先采取汇率计算为准。这个不科学啊。。。' ,
  `VERSION` INT(8) NULL ,
  PRIMARY KEY (`WATCH_ID`) ,
  UNIQUE INDEX `WATCH_ID_UNIQUE` (`WATCH_ID` ASC) ,
  INDEX `fk_T_WATCH_T_RETAILER_STORE1_idx` (`STORE_ID` ASC) ,
  INDEX `fk_T_WATCHES_T_PUBLISHMENTS1_idx` (`PUBLICATION_ID` ASC) ,
  INDEX `fk_T_WATCHES_T_WATCH_BRANDS1_idx` (`BRAND_ID` ASC) ,
  CONSTRAINT `fk_T_WATCH_T_RETAILER_STORE1`
    FOREIGN KEY (`STORE_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_WATCH_STORES` (`WATCHSTORE_ID` )
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_WATCHES_T_PUBLISHMENTS1`
    FOREIGN KEY (`PUBLICATION_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_PUBLICATIONS` (`PUBLICATION_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_WATCHES_T_WATCH_BRANDS1`
    FOREIGN KEY (`BRAND_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_WATCH_BRANDS` (`BRAND_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_WATCHSHOW`.`T_USER_HISTORIES`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB_WATCHSHOW`.`T_USER_HISTORIES` (
  `HISTORY_ID` BIGINT(20) NOT NULL AUTO_INCREMENT ,
  `USER_ID` BIGINT(20) NOT NULL ,
  `TIMESTAMP` TIMESTAMP NOT NULL COMMENT '浏览某个名表的时间' ,
  `DEVICE_UUID` VARCHAR(45) NULL COMMENT '客户端设备GUID' ,
  `DEVICE_SN` VARCHAR(45) NULL COMMENT '客户端设备SN' ,
  `DEVICE_OS` VARCHAR(45) NULL COMMENT '客户端设备OS' ,
  `DEVICE_MAC_ADDR` VARCHAR(45) NULL COMMENT '客户端设备MAC地址' ,
  `IP_ADDRESS` VARCHAR(45) NULL COMMENT '客户端Mac地址' ,
  `VERSION` INT(8) NULL ,
  `COMMENT` VARCHAR(1024) NULL ,
  `VIEWED_WATCH_ID` BIGINT(20) NULL ,
  `ACTION` VARCHAR(45) NOT NULL DEFAULT 'NA' COMMENT '操作: (MF) Mark as Favorite | UMF Unmark Favorite | (RT)Rate | NA (NO-Action)' ,
  `COMMENT_ATTACHMENTS_PATH` VARCHAR(512) NULL ,
  `LONGITUDE` VARCHAR(128) NULL ,
  `LATTITUDE` VARCHAR(128) NULL ,
  `LOCATION` VARCHAR(256) NULL ,
  `RATE_IDEA` INT(2) NULL ,
  `RATE_MOVEMENT` INT(2) NULL ,
  `RATE_PROSPECT` INT(2) NULL ,
  `RATE_LOOK` INT(2) NULL ,
  `RATE_PRICE` INT(2) NULL ,
  `RATE_SUM` INT(2) NULL ,
  `SUBJECT` VARCHAR(512) NULL ,
  PRIMARY KEY (`HISTORY_ID`) ,
  INDEX `fk_T_USER_HISTORY_T_USER1_idx` (`USER_ID` ASC) ,
  UNIQUE INDEX `HISTORY_ID_UNIQUE` (`HISTORY_ID` ASC) ,
  INDEX `fk_T_USER_HISTORIES_T_WATCHES1_idx` (`VIEWED_WATCH_ID` ASC) ,
  CONSTRAINT `fk_T_USER_HISTORY_T_USER1`
    FOREIGN KEY (`USER_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_USERS` (`USER_ID` )
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_USER_HISTORIES_T_WATCHES1`
    FOREIGN KEY (`VIEWED_WATCH_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_WATCHES` (`WATCH_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_WATCHSHOW`.`T_ADMIN_HISTORIES`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB_WATCHSHOW`.`T_ADMIN_HISTORIES` (
  `HISTORY_ID` BIGINT(20) NOT NULL AUTO_INCREMENT ,
  `TIMESTAMP` TIMESTAMP NOT NULL COMMENT '本次log生成的时间戳' ,
  `IP_ADDRESS` VARCHAR(45) NOT NULL COMMENT '操作客户端地址' ,
  `COMMENTS` VARCHAR(256) NOT NULL DEFAULT 'no-message' COMMENT '批注：长度与短信相. 用于查看更新信息备注' ,
  `VERSION` INT(8) NULL ,
  `ADMIN_ID` BIGINT(20) NOT NULL ,
  `PUBLICATION_ID` BIGINT(20) NULL COMMENT '发表物的关联ID' ,
  `OPERTED_WATCH_ID` BIGINT(20) NULL ,
  `ACTION` VARCHAR(45) NOT NULL DEFAULT 'None' COMMENT '本次操作类型取值：Create, Read, Update, Delete, None' ,
  PRIMARY KEY (`HISTORY_ID`) ,
  INDEX `fk_T_ADMIN_HISTORIES_T_STORE_ADMINS1_idx` (`ADMIN_ID` ASC) ,
  INDEX `fk_T_ADMIN_HISTORIES_T_NEWS1_idx` (`PUBLICATION_ID` ASC) ,
  INDEX `fk_T_ADMIN_HISTORIES_T_WATCHES1_idx` (`OPERTED_WATCH_ID` ASC) ,
  CONSTRAINT `fk_T_ADMIN_HISTORIES_T_STORE_ADMINS1`
    FOREIGN KEY (`ADMIN_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_STORE_ADMINS` (`ADMIN_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_ADMIN_HISTORIES_T_NEWS1`
    FOREIGN KEY (`PUBLICATION_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_PUBLICATIONS` (`PUBLICATION_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_ADMIN_HISTORIES_T_WATCHES1`
    FOREIGN KEY (`OPERTED_WATCH_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_WATCHES` (`WATCH_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_WATCHSHOW`.`T_VISITING_HISTORIES`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB_WATCHSHOW`.`T_VISITING_HISTORIES` (
  `HISTORY_ID` BIGINT(20) NOT NULL AUTO_INCREMENT ,
  `TIME` TIMESTAMP NOT NULL ,
  `STORE_ID` BIGINT(20) NOT NULL ,
  `USER_ID` BIGINT(20) NOT NULL ,
  `VERSION` INT(8) NULL ,
  `COMMENTS` MEDIUMTEXT NULL COMMENT '评论' ,
  `ACTION` VARCHAR(45) NOT NULL DEFAULT 'NA' COMMENT 'CKI (Checkin) | RT (Rate) | VW(View) | NA (No action)' ,
  PRIMARY KEY (`HISTORY_ID`) ,
  INDEX `fk_T_SIGNIN_LOGS_T_RETAILER_STORES1_idx` (`STORE_ID` ASC) ,
  INDEX `fk_T_SIGNIN_LOGS_T_USERS1_idx` (`USER_ID` ASC) ,
  CONSTRAINT `fk_T_SIGNIN_LOGS_T_RETAILER_STORES1`
    FOREIGN KEY (`STORE_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_WATCH_STORES` (`WATCHSTORE_ID` )
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `fk_T_SIGNIN_LOGS_T_USERS1`
    FOREIGN KEY (`USER_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_USERS` (`USER_ID` )
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_WATCHSHOW`.`T_PLATFORM_ADMINS`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB_WATCHSHOW`.`T_PLATFORM_ADMINS` (
  `PLATADMIN_ID` BIGINT(20) NOT NULL AUTO_INCREMENT ,
  `LOGIN_NAME` VARCHAR(16) NOT NULL COMMENT '登录名' ,
  `PASSWORD` VARCHAR(16) NOT NULL COMMENT '密码' ,
  `PASSWORD_MD5` VARCHAR(32) NULL COMMENT '密码的md5摘要' ,
  `VERSION` INT(8) NULL ,
  PRIMARY KEY (`PLATADMIN_ID`) ,
  UNIQUE INDEX `LOGIN_NAME_UNIQUE` (`LOGIN_NAME` ASC) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_WATCHSHOW`.`T_BULLETINS`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB_WATCHSHOW`.`T_BULLETINS` (
  `BULLETIN_ID` INT(20) NOT NULL ,
  `TITLE` VARCHAR(512) NOT NULL COMMENT '标题' ,
  `SUBTITILE` VARCHAR(1024) NULL COMMENT '副标题' ,
  `KIND` VARCHAR(45) NULL DEFAULT 'notice' COMMENT '通知: notice' ,
  `EFFECTIVE_TIME` INT(4) NULL COMMENT '有效时间(天数):' ,
  `PUBLISH_TIME` DATETIME NULL COMMENT '发布日期' ,
  `IS_ACTIVE` BIT NULL DEFAULT 0 COMMENT '是否有效: 鉴于人工手动可以终止此通告，其优先级别高于按照有效日期判断。' ,
  `CONTENT` MEDIUMTEXT NOT NULL COMMENT '内容' ,
  `PLATADMIN_ID` BIGINT(20) NOT NULL COMMENT '发布者' ,
  `VERSION` INT(8) NULL ,
  PRIMARY KEY (`BULLETIN_ID`) ,
  INDEX `fk_T_BULLETINS_T_PLATFORM_ADMINS1_idx` (`PLATADMIN_ID` ASC) ,
  CONSTRAINT `fk_T_BULLETINS_T_PLATFORM_ADMINS1`
    FOREIGN KEY (`PLATADMIN_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_PLATFORM_ADMINS` (`PLATADMIN_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_WATCHSHOW`.`T_PLATADMIN_LOGS`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `DB_WATCHSHOW`.`T_PLATADMIN_LOGS` (
  `PLATADMINLOG_ID` BIGINT(20) NOT NULL AUTO_INCREMENT ,
  `COMMENTS` VARCHAR(256) NULL ,
  `TIMESTAMP` TIMESTAMP NOT NULL ,
  `ADMIN_ID` BIGINT(20) NOT NULL ,
  `VERSION` INT(8) NULL ,
  `ACTION` VARCHAR(45) NOT NULL DEFAULT 'NA' COMMENT '操作: AOS(Authorize open store) | AFA (Authorize Foulder Account) | NA (No action)' ,
  `T_BULLETINS_BULLETIN_ID` INT(20) NULL ,
  PRIMARY KEY (`PLATADMINLOG_ID`) ,
  INDEX `fk_T_PLATMADMIN_LOGS_T_PLATFORM_ADMINS1_idx` (`ADMIN_ID` ASC) ,
  INDEX `fk_T_PLATADMIN_LOGS_T_BULLETINS1_idx` (`T_BULLETINS_BULLETIN_ID` ASC) ,
  CONSTRAINT `fk_T_PLATMADMIN_LOGS_T_PLATFORM_ADMINS1`
    FOREIGN KEY (`ADMIN_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_PLATFORM_ADMINS` (`PLATADMIN_ID` )
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_T_PLATADMIN_LOGS_T_BULLETINS1`
    FOREIGN KEY (`T_BULLETINS_BULLETIN_ID` )
    REFERENCES `DB_WATCHSHOW`.`T_BULLETINS` (`BULLETIN_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;



SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;


#插入两个默认的平台管理员账号信息
INSERT INTO T_PLATFORM_ADMINS(LOGIN_NAME,PASSWORD) VALUES("administrator","password");
INSERT INTO T_PLATFORM_ADMINS(LOGIN_NAME,PASSWORD) VALUES("testadmin","password");